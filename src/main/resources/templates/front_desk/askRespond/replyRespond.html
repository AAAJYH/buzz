<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <base href="http://localhost/">
    <title></title>
    <meta name="renderer" content="webkit" />
    <link href="css/css+base_css+jquery.suggest_css+plugins_css+plugins+jquery.jgrowl_css+other+popup_css+app+topbar_v2^alw^1527308432.css" rel="stylesheet" type="text/css">
    <link href="css/css+mfw-ask+detail_v3_css+mfw-ask+img_pop_css+mfw-ask+detail_answer_foldup_css+mfw-ask+upload_pics_css+mfw-ask+pop_answer_success^Ylda^1537424364.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/x-icon" href='images/logoHead.ico'>
    <script src="js/jquery-1.11.0.min.js"></script>
    <!--editor strat -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/froala_editor.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/froala_style.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/code_view.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/colors.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/emoticons.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/image_manager.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/image.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/line_breaker.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/table.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/char_counter.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/video.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/fullscreen.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/file.css">
    <link rel="stylesheet" href="froala_editor_2.9.0/css/plugins/quick_insert.css">
    <link href="froala_editor_2.9.0/css/themes/gray.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="froala_editor_2.9.0/ajax/libs/codemirror/5.3.0/codemirror.min.css">
    <script type="text/javascript" src="froala_editor_2.9.0/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/ajax/libs/codemirror/5.3.0/codemirror.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/ajax/libs/codemirror/5.3.0/mode/xml/xml.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/froala_editor.min.js" ></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/align.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/char_counter.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/code_beautifier.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/code_view.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/colors.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/draggable.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/emoticons.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/entities.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/file.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/font_size.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/font_family.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/fullscreen.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/image.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/image_manager.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/line_breaker.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/inline_style.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/link.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/lists.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/paragraph_format.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/paragraph_style.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/quick_insert.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/quote.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/table.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/save.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/url.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/plugins/video.min.js"></script>
    <script type="text/javascript" src="froala_editor_2.9.0/js/languages/zh_cn.js"></script>
    <!--editor end-->
</head>
<body>
<div class="topBar">
    <div class="topBarC">
        <div class="logo"><a style="background: url('images/logoTop.png') no-repeat 0 0;display: block;width:40px;height: 39px;position: relative;" title="嗡嗡嗡" href="front_desk/homePage.html"></a></div>
        <div class="t_nav">
            <ul id="pnl_nav" data-cs-t="headnav_wo">
                <li data-cs-p="index">
                    <strong class="t"><a href="front_desk/homePage.html">首页</a></strong>
                </li>
                <li data-cs-t="wenda" data-cs-p="wenda">
                    <strong class="t"><a href="destinationController/queryAllDestination" title="目的地">目的地</a></strong>
                </li>
                <li data-cs-t="things" data-cs-p="things">
                    <strong class="t"><a href="front_desk/askRespond/askRespond.html" title="旅游问答">旅游问答</a></strong>
                </li>
                <li data-cs-p="together">
                    <strong class="t"><a href="/hotelController/hotel2Index" title="酒店">酒店</a></strong>
                </li>
                <li data-cs-p="group">
                    <strong class="t"><a href="/mapController/MarkerClustererMapIndex" title="地图">地图</a></strong>
                </li>
            </ul>
        </div>
        <div class="t_info">
            <div class="pagelet-block" id="login_box">
                <div class="no_login">
                    <span><a href="usersController/show_login_html">登录</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="usersController/show_login_html">注册</a></span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="wrapper" data-qid="14051678" data-uid="58191946" id="_js_wrapper" data-is_answer_detail="0" data-source="1">
    <div class="detail-wrap clearfix">
        <!-- 问答主要内容 -->
        <div class="col-main">
            <!-- 面包屑导航 -->
            <div class="crumb">
                <a href="front_desk/askRespond/askRespond.html" target="_blank">嗡嗡嗡问答</a> &gt; <span></span>
            </div>
            <!-- 搜索区域 -->
            <div class="search-box">
                <div class="search-box">
                    <div class="search-panel" data-cs-t="wenda">
                        <div class="clearfix _j_suggest_hd">
                            <div class="sp-input">
                                <input type="text" id="_j_wenda_seach_input" placeholder="提问前请先搜索，看看你的问题其他蜂蜂是否已经问过">
                            </div>
                            <input type="button" id="_j_wenda_seach_button" class="sp-button">
                        </div>
                        <div class="bd _j_suggest_box hide">
                        </div>
                    </div>
                </div>
            </div>
            <!-- 问题区域 -->
            <div class="q-detail" id="_js_askDetail">
                <!-- 问题详情 -->
                <div class="q-content">
                    <div class="q-title"></div>
                    <div class="q-desc"></div>
                    <div class="q-info1 clearfix">
                        <div class="q-tags fl"></div>
                        <div class="pub-bar fr"></div>
                    </div>
                    <div class="q-info2 clearfix"></div>
                </div>

                <div class="q-operate clearfix">
                    <div class="fl">
                        <!-- 补充问题 -->
                        <div class="qt-modify">
                            <a class="_j_modify _j_pop_hide">补充问题</a>
                        </div>
                        <!-- 删除问题 -->
                        <div class="qt-delete">
                            <a class="_j_delete">删除问题</a>
                        </div>
                    </div>
                    <div class="fr" id="answerButton">
                        <a class="btn-answer _j_btn_goanswer" rel="nofollow">回答</a>
                    </div>
                </div>
                <!-- 修改问题内容 -->
                <div id="_js_answerText" style="display: none;">
                    <div id="askRespondDetailEditor" style="margin-top: 30px;"></div>
                    <div class="q-modify act-pop ap-modify _j_word _js_editorWrap _js_q_related_block" style="border: 0px;">
                        <div class="ask_words clearfix">
                            <input class="btn-smodi _j_do_submit" type="button" value="确定修改">
                            <input class="btn-cmodi _j_do_cancel" type="button" value="放弃修改">
                        </div>
                    </div>
                </div>
            </div>
            <!-- 回答区域 -->
            <div class="answer-wrap">
                <div class="bd _j_pager_box"></div>
                <!-- 加载更多 -->
                <div class='_j_pager'>
                    <div class='ft ft_load_btn _j_page_loader'><div class='answer-more'><a rel='nofollow' data-index='1' onclick='load_replyAskRespond(this)'>加载更多<i></i></a></div></div>
                    <div class='_j_page_loading ft hide ft_loading'><div class='answer-loading'>正在加载<i></i></div></div>
                </div>
                <!-- 折叠问题 -->
                <div class="answer-add clearfix">
                    <a name="answer"></a>
                    <div class="aa-hd"></div>
                    <div class="editor-outer _j_editorOuter _js_editorWrap _js_forFixTitle">
                        <div class="wysiwyg-container wysiwyg-active" style="width: 700px;margin: 0px;padding: 0px;">
                            <div class="editor-container wysiwyg-editor" style="width: 700px;margin: 0px;padding: 0px;">
                                <div id="replyAskRespondEditor"></div>
                            </div>
                        </div>
                        <div class="editor-scroll">
                            <div class="aa-ft">
                                <input class="btn-comment _j_submit_answer_btn" type="button" data-loginState='' onclick='insert_replyAskRespond(this)' value="提交回答">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 问答页面侧边栏 -->
        <div class="col-side" id="_js_right_side">
            <!-- 我要提问 -->
            <div class="btn-question">
                <a href="front_desk/askRespond/question.html" class="btn-ask btn-ask2" target="_blank">我要提问</a>
            </div>
            <!-- 广告图片 -->
            <div class="ad-box" data-cs-t="wenda">
                <div data-pagelet id="qa_recommend_pagelet" class="" data-api=":qa:pagelet:TopRecommendApi" data-params="{&quot;mddid&quot;:10444,&quot;title&quot;:&quot;\u9752\u5c9b\u9644\u8fd1\u6709\u4ec0\u4e48\u597d\u73a9\u7684\u5730\u65b9\u4e48&quot;}" data-async="1" data-controller="/js/qa/ARecommentQu"></div>
            </div>
            <div style="margin-top:0px;margin-bottom: 20px;">
                <div data-pagelet id="pagelet-block-bdc82da9c43e939fe92802010b77e726" class="" data-api=":qa:pagelet:ads" data-params="{&quot;mddid&quot;:10444,&quot;tags&quot;:[&quot;\u9752\u5c9b&quot;,&quot;\u666f\u70b9&quot;]}" data-async="1" data-controller=""></div>
            </div>
            <!-- 相关问题 -->
            <div data-pagelet id="qa_relation_question_pagelet" class="" data-api=":qa:pagelet:RelationQuestionApi" data-params="{&quot;qid&quot;:14051678}" data-async="1" data-controller=""></div>
        </div>
    </div>
</div>
<script id="_j_picdialog" type="text/x-jquery-tmpl">
        <div class="stage-wrap">
            <div class="aload1 _j_loading1"></div>
            <div class="aload2 _j_loading2"></div>
            <img class="_j_img" src="">
        </div>
 </script>
<link href="css/mfw-footer.css" rel="stylesheet" type="text/css"/>
<div id="footer">
    <div class="ft-content" style="width: 1105px">
        <div class="ft-copyright">
            <a href="front_desk/homePage.html"><i style="background:url('images/logoBottom.png') no-repeat 0 0px;float:left;width: 136px;height: 39px;overflow: hidden;margin: 8px 20px 0 0;"></i></a>
            <p>© 2018 Mafengwo.cn <a href="http://www.miibeian.gov.cn/" target="_blank" rel="nofollow">京ICP备11015476号</a> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502013401" target="_blank"><img src="http://images.mafengwo.net/images/footer/police_record.png" width="12" style="margin:0 2px 4px 0;">京公网安备11010502013401号</a> <a href="http://images.mafengwo.net/images/about/icp2.jpg" target="_blank" rel="nofollow">京ICP证110318号</a><span class="m_l_10">违法和不良信息举报电话: 010-59222790 举报邮箱 mfwyouji@mafengwo.com</span></p>
            <p>网络出版服务许可证：(总)网出证(京)字第161号<span class="m_l_10">增值电信业务经营许可证：京B2-20180228</span> <a href="http://images.mafengwo.net/images/about/licence_3.jpg" target="_blank" rel="nofollow" class="m_l_10">营业执照</a><a href="/sales/uhelp/doc" target="_blank" rel="nofollow" class="m_l_10">帮助中心</a><span class="m_l_10">嗡嗡嗡客服：国内</span><span class="highlight">4006-345-678</span><span class="m_l_10">海外</span> <span class="highlight">+86-10-5922-2799</span></p>
        </div>
        <div class="ft-safety">
            <a class="s-a" target="_blank" href="https://search.szfw.org/cert/l/CX20140627008255008321" id="___szfw_logo___"></a>
            <a class="s-b" href="https://ss.knet.cn/verifyseal.dll?sn=e130816110100420286o93000000&ct=df&a=1&pa=787189" target="_blank" rel="nofollow"></a>
            <a class="s-c" href="http://www.itrust.org.cn/Home/Index/itrust_certifi/wm/1669928206.html" target="_blank" rel="nofollow"></a>
        </div>
    </div>
</div>
<link href="css/mfw-toolbar.css" rel="stylesheet" type="text/css"/>
<div class="mfw-toolbar" id="_j_mfwtoolbar">
    <div class="toolbar-item-top">
        <a role="button" class="btn _j_gotop">
            <i class="icon_top"></i>
            <em>返回顶部</em>
        </a>
    </div>
    <div class="toolbar-item-feedback">
        <a role="button" data-japp="feedback" class="btn">
            <i class="icon_feedback"></i>
            <em>意见反馈</em>
        </a>
    </div>
    <div class="toolbar-item-code">
        <a role="button" class="btn">
            <i class="icon_code"></i>
        </a>
        <a role="button" class="mfw-code _j_code">
            <img src="https://p1-q.mafengwo.net/s1/M00/6C/51/wKgIC1t_6TuASybrAADGUPUHjr021.jpeg?imageMogr2%2Fthumbnail%2F%21450x192r%2Fgravity%2FCenter%2Fcrop%2F%21450x192%2Fquality%2F90" width="450" height="192" >
        </a>
    </div>
    <div class="toolbar-item-down">
        <a role="button" class="btn _j_gobottom">
            <i class="icon_down"></i>
            <em>页面底部</em>
        </a>
    </div>
</div>
<input type="hidden" id="userId">
<input type="hidden" id="currentUserId">
<input type="hidden" id="askRespondId">
<input type="hidden" id="askRespondDetail">
<input type="hidden" id="replyHeadPhoto">
<input type="hidden" id="stateId">
<script language="javascript" type="text/javascript" src="js/jquery.scrollTo.js"></script>
<script>
    $().ready(
        function()
        {
            var askRespondId=GetQueryString("askRespondId");
            $("#askRespondId").val(askRespondId);
            if(null!=askRespondId&&""!=askRespondId)
            {
                //获取当前登录用户
                $.ajax({
                    url: "usersController/getCurrentLoginUserAndreplyAskRespond",
                    dataType: "json",
                    type: "post",
                    data:{askRespondId:askRespondId},
                    success:function(data)
                    {
                        var aa_hdHtml="";
                        var login_boxHtml="";
                        if(data.loginState)
                        {
                            $("#currentUserId").val(data.currentUser.userId);
                            var currentUserId=data.currentUser.userId;//当前登录用户
                            var userId=$("#userId").val();//问答所属用户
                            aa_hdHtml="<a class='aa-avatar' href='front_desk/users/personalSpace.html?userId="+data.currentUser.userId+"'><img src='"+data.currentUser.photo+"' width='50px' height='50px' class='photo'></a><a class='aa-name' href='front_desk/users/personalSpace.html?userId="+data.currentUser.userId+"'>"+data.currentUser.userName+"</a>";
                            $("._j_submit_answer_btn").attr("data-loginState",true);
                            login_boxHtml="<ul class='user_info'><li id='pnl_user_msg' data-hoverclass='on' class='msg _j_hoverclass'><span id='oldmsg' class='oldmsg'><a href='javascript:' class='infoItem'>消息<b></b></a></span><ul id='head-msg-box' class='drop-bd'><li><a href='front_desk/message/my_replyAskRespondCommentMessage.html' target='_blank' rel='nofollow'>回答评论</a></li><li><a href='front_desk/message/my_replyAskRespondMessage.html' target='_blank' rel='nofollow'>问答消息</a></li><li><a href='front_desk/message/my_travelNotesReplyMessage.html' target='_blank' rel='nofollow'>游记评论</a></li></ul></li><li class='account _j_hoverclass' data-hoverclass='on' id='pnl_user_set'><span class='t'><a class='infoItem' href='front_desk/users/personalSpace.html?userId="+data.currentUser.userId+"'><img src='"+data.currentUser.photo+"' width='32' height='32' align='absmiddle'><b></b></a></span><div class='uSet c'><div class='asset'><a class='coin' href='front_desk/users/personalSpace.html?userId="+data.currentUser.userId+"' target='_blank'>"+data.currentUser.userName+"</a></div><a href='front_desk/users/personalSpace.html?userId="+data.currentUser.userId+"' target='_blank' title='我的嗡嗡嗡' >我的嗡嗡嗡</a><a href='front_desk/travelNotes/createNoteIndex.html' target='_blank' class='drop-write' title='写游记'>写游记</a><a href='front_desk/users/my_collect_scenicSpotCollect.html' title='我的收藏' target='_blank' rel='nofollow'>我的收藏</a><a href='front_desk/users/my_replyAskRespond.html?userId="+data.currentUser.userId+"' target='_blank' title='我的问答' rel='nofollow'>我的问答</a><a href='front_desk/users/travelNotes.html?userId="+data.currentUser.userId+"' target='_blank' class='drop-write' title='我的游记' rel='nofollow'>我的游记</a><a href='front_desk/users/my_travelCollection.html?userId="+data.currentUser.userId+"' target='_blank' title='游记收藏' rel='nofollow'>游记收藏</a><a href='front_desk/users/my_orderForm.html' title='我的订单' target='_blank' rel='nofollow'>我的订单</a><a href='front_desk/users/my_users.html' title='我的设置' target='_blank' rel='nofollow'>设置</a><a onclick='logout()' title='退出登录' rel='nofollow'>退出</a></div></li></ul>";
                        }
                        else
                        {
                            var currentHref=window.location.href;
                            aa_hdHtml="<a class='aa-avatar' href='usersController/show_login_html?url="+currentHref+"'><img src='images/wKgED1uqIpCARLIhAAAZUeRPlFM676.png' width='50px' height='50px' class='photo'></a><a class='aa-name' href='usersController/show_login_html?url="+currentHref+"'>未登录</a>";
                            $("._j_submit_answer_btn").attr("data-loginState",false);
                            var url=window.location.href;
                            login_boxHtml="<div class='no_login'><span><a href='usersController/show_login_html?url="+url+"'>登录</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href='usersController/show_login_html?url="+url+"'>注册</a></span></div>";
                        }
                        $(".aa-hd").html(aa_hdHtml);
                        $("#login_box").html(login_boxHtml);
                        //判断悬浮不是用户头像或者不是用户下拉列表隐藏
                        $(document).mouseover(
                            function(e)
                            {
                                if(0<$(e.target).closest("#pnl_user_msg").length||0<$(e.target).closest("#head-msg-box").length)
                                    $("#pnl_user_msg").addClass("on");
                                else
                                    $("#pnl_user_msg").removeClass("on");
                                if(0<$(e.target).closest("#pnl_user_set").length||0<$(e.target).closest(".uSet").length)
                                    $("#pnl_user_set").addClass("on");
                                else
                                    $("#pnl_user_set").removeClass("on");
                            }
                        );
                    }
                });
                //根据问答编号获取
                $.ajax({
                    url: "askRespondController/find_askRespondByaskRespondId",
                    dataType: "json",
                    type: "post",
                    data: {askRespondId: askRespondId},
                    success: function (data)
                    {
                        if (null != data)
                        {
                            if (data.result) {
                                $("title").text(data.askRespond.askRespondTitle + "  -  嗡嗡嗡");
                                $(".crumb").children("span").text(data.askRespond.askRespondTitle);
                                var q_titleHtml = "";
                                if (null != data.askRespond.cityId && "" != data.askRespond.cityId)
                                    q_titleHtml = "<a href='front_desk/askRespond/askRespond.html?cityId="+data.askRespond.cityId+"' target='_blank' class='location'><i></i>" + data.askRespond.city.cityName + "</a><h1>" + data.askRespond.askRespondTitle + "</h1>";
                                else
                                    q_titleHtml = "<h1>" + data.askRespond.askRespondTitle + "</h1>";
                                $(".q-title").html(q_titleHtml);
                                $(".question-title").text(data.askRespond.askRespondTitle);
                                var q_tagsHtml = "";
                                if (null != data.askRespond.interestLabelId && "" != data.askRespond.interestLabelId)
                                    q_tagsHtml = "<a class='a-tag' href='front_desk/askRespond/askRespond.html?interestLabelId="+data.askRespond.interestLabelId+"' target='_blank'>" + data.askRespond.interestlabel.interestLabelName + "</a>";
                                $(".q-tags").html(q_tagsHtml);
                                $(".q-desc").html(data.askRespond.askRespondDetail);
                                var pub_barHtml = "<a href='front_desk/users/personalSpace.html?userId=" + data.askRespond.user.userId + "' class='photo' target='_blank'> <img src='" + data.askRespond.user.photo + "' width='16' height='16'></a><a class='name' href='front_desk/users/personalSpace.html?userId=" + data.askRespond.user.userId + "' target='_blank'>" + data.askRespond.user.userName + "</a><span class='time'><span>" + format_time(data.askRespond.releaseTime) + "</span></span>";
                                $(".pub-bar").html(pub_barHtml);
                                $("#userId").val(data.askRespond.user.userId);
                                var currentUserId = $("#currentUserId").val();
                                //判断当前登录用户是否为该问答所属用户
                                if (null == currentUserId || "" == currentUserId || currentUserId != data.askRespond.user.userId) {
                                    $(".q-info2").css("display", "none");//隐藏问答状态
                                    $(".qt-delete").css("display", "none");//隐藏删除问题
                                    $(".qt-modify").css("display", "none");//隐藏补充问题
                                }
                                else if (data.askRespond.user.userId == currentUserId) {
                                    var step = 0;
                                    $("#stateId").val(data.askRespond.stateId);
                                    if (data.askRespond.stateId == "0ee26211-3ae8-48b7-973f-8488bfe837d6")//当状态等于正常时
                                    {
                                        step = 1;
                                        $(".qt-delete").css("display", "block");//显示删除问题
                                        $(".qt-modify").css("display", "block");//显示补充问题
                                        $("#askRespondDetail").val(data.askRespond.askRespondDetail);
                                        $("#askRespondDetailEditor").children(".show-placeholder").children(".fr-element").html(data.askRespond.askRespondDetail);
                                    }
                                    else if (data.askRespond.stateId == "79ce7fee-9393-4ab8-88a0-306d7b2c9d22") {
                                        step = 2;
                                        $(".qt-delete").css("display", "none");//隐藏删除问题
                                        $(".qt-modify").css("display", "none");//隐藏补充问题
                                    }
                                    else if (data.askRespond.stateId == "2130f38e-48b2-4e7e-a4cf-120aa3a149af") {
                                        step = 3;
                                        $(".qt-delete").css("display", "none");//隐藏删除问题
                                        $(".qt-modify").css("display", "none");//隐藏补充问题
                                    }
                                    var q_info2Html = "<div class='q-step q-step" + step + " fl'><i class='icon icon1'></i><span>提出问题 &gt;</span><i class='icon icon2'></i><span>收到回答 &gt;</span><i class='icon icon3'></i><span>采纳答案</span></div>";
                                    $(".q-info2").html(q_info2Html);
                                    $(".q-info2").css("display", "block");//显示问答状态
                                }
                                <!--  -->
                                var _j_pager_boxHtml = "<ul class='answer-list '><div id='normal_answer_wrap' class='pagelet-block'>";
                                if (null != currentUserId && "" != currentUserId) {
                                    if (null != data.replyAskRespond)//当前用户的回复问答
                                    {
                                        $(".qt-delete").css("display", "none");//隐藏删除问题
                                        $(".qt-modify").css("display", "none");//隐藏补充问题
                                        $("#answerButton").css("display", "none");
                                        $(".answer-add").css("display", "none");//如果当前登录用户已经有回复问答,隐藏新增回复问答
                                        var _js_zanchildrenspanNum =data.replyAskRespond.replyAskRespondTopNum;
                                        var _js_just_youHtml = "";
                                        if (currentUserId == data.askRespond.userId)//如果当前登录用户不是问答主人不能进行采纳为最佳答案
                                        {
                                            if (data.askRespond.stateId != "2130f38e-48b2-4e7e-a4cf-120aa3a149af")//如果当前问答状态不等于已采纳答案时,显示最佳答案
                                                _js_just_youHtml = "<div class='fr'><a class='btn-adopt _js_just_you' data-replyAskRespondId='" + data.replyAskRespond.replyAskRespondId + "' onclick='accept_replyAskRespond(this)'>采纳为最佳答案</a></div>";
                                        }
                                        if (data.replyAskRespond.optimumAnswer == "false")//判断是否为题主采纳
                                            _j_pager_boxHtml += "<li class='answer-item clearfix _j_answer_item _js_answer14082617 '><div class='answer-side _js_answerAva'><a class='btn-ding _js_zan ' data-replyAskRespondId='"+data.replyAskRespond.replyAskRespondId+"' onclick='insert_replyAskRespondTop(this)'><i></i><span>" + _js_zanchildrenspanNum + "</span></a></div><div class='answer-content _js_answer_content'><div class='answer-info clearfix'><div class='user-bar fl'><a class='_j_filter_click avatar' href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.user.userId + "' target='_blank'><img src='" + data.replyAskRespond.user.photo + "' width='48' height='48' class='photo'></a><a class='name' href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.user.userId + "' target='_blank'>" + data.replyAskRespond.user.userName + "</a></div></div><div class='_j_short_answer_item'><div class='_j_long_answer_item'><div class='_j_answer_html'>" + data.replyAskRespond.replyAskRespondContent + "</div></div></div></div>";
                                        else
                                            _j_pager_boxHtml += "<li class='answer-item clearfix _j_answer_item _js_answer14082617 '><div class='answer-side _js_answerAva'><a class='btn-ding _js_zan ' data-replyAskRespondId='"+data.replyAskRespond.replyAskRespondId+"' onclick='insert_replyAskRespondTop(this)'><i></i><span>" + _js_zanchildrenspanNum + "</span></a></div><div class='answer-content _js_answer_content'><div class='answer-info clearfix'><div class='user-bar fl'><a class='_j_filter_click avatar' href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.user.userId + "' target='_blank'><img src='" + data.replyAskRespond.user.photo + "' width='48' height='48' class='photo'></a><a class='name' href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.user.userId + "' target='_blank'>" + data.replyAskRespond.user.userName + "</a></div><ul class='answer-medal fr'><li class='gold'><div class='btn'><i></i><span>题主采纳</span></div></li></ul></div><div class='_j_short_answer_item'><div class='_j_long_answer_item'><div class='_j_answer_html'>" + data.replyAskRespond.replyAskRespondContent + "</div></div></div></div>";
                                        if (currentUserId == data.replyAskRespond.userId)//判断当前登录用户是否为当前回复问答主人,如果是则显示删除我的问答和完善我的问答
                                            if(data.replyAskRespond.optimumAnswer=="false")
                                                _j_pager_boxHtml += "<div class='a-operate _js_operate clearfix'><div class='fl'><div class='cmt-toggle'><a class='_js_slideComment' onclick='insert_replyAskRespondComment(this)'><i></i><span>添加评论</span></a></div><div class='cmt-sup border_right'><input type='hidden' id='my_replyAskRespondBackups'><a class='btn-a _j_modify_answer' onclick='showupdate_myreplyAskRespond(this)'>完善我的回答</a></div><div class='cmt-sup'><a class='btn-b _j_delete_answer' data-replyAskRespondId='" + data.replyAskRespond.replyAskRespondId + "' onclick='delete_myreplyAskRespond(this)'><i class='icon-del'></i>删除我的回答</a></div><div class='pub-time'><span>发布于 " + format_time(data.replyAskRespond.releaseTime) + "</span></div></div>" + _js_just_youHtml + "</div>";
                                            else
                                                _j_pager_boxHtml += "<div class='a-operate _js_operate clearfix'><div class='fl'><div class='cmt-toggle'><a class='_js_slideComment' onclick='insert_replyAskRespondComment(this)'><i></i><span>添加评论</span></a></div><div class='cmt-sup border_right'><input type='hidden' id='my_replyAskRespondBackups'><a class='btn-a _j_modify_answer' onclick='showupdate_myreplyAskRespond(this)'>完善我的回答</a></div><div class='pub-time'><span>发布于 " + format_time(data.replyAskRespond.releaseTime) + "</span></div></div>" + _js_just_youHtml + "</div>";
                                        else
                                            _j_pager_boxHtml += "<div class='a-operate _js_operate clearfix'><div class='fl'><div class='cmt-toggle'><a class='_js_slideComment' onclick='insert_replyAskRespondComment(this)'><i></i><span>添加评论</span></a></div><div class='pub-time'><span>发布于 " + format_time(data.replyAskRespond.releaseTime) + "</span></div></div>" + _js_just_youHtml + "</div>";
                                        var _js_comment_listHtml = "<div class='_js_comment_list'>";
                                        if (null != data.replyAskRespond.replyaskrespondcomments) {
                                            _js_comment_listHtml += "<h3 class='comment-title' style=''>全部评论</h3><ul class='comment-list _j_comment_list_ul'>";
                                            for (var i = 0; i < data.replyAskRespond.replyaskrespondcomments.length; i++) {
                                                var userName = "";//判断该评论信息是答主还是题主
                                                if (data.replyAskRespond.replyaskrespondcomments[i].userId == data.askRespond.userId)
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "</a><span class='answer_owner' style='margin-left: 6px'>题主</span>: " + data.replyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                                else if (data.replyAskRespond.replyaskrespondcomments[i].userId == data.replyAskRespond.userId)
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "</a><span class='answer_owner' style='margin-left: 6px'>答主</span>: " + data.replyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                                else
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "</a>: " + data.replyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                                var c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskRespond.replyaskrespondcomments[i].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' data-userName='" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                                if (currentUserId == data.replyAskRespond.replyaskrespondcomments[i].userId)//如果当前登录用户为当前回复评论用户显示删除评论按钮
                                                    c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskRespond.replyaskrespondcomments[i].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' data-userName='" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='_j_delete_comment fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='delete_replyAskRespondComment(this)'>删除</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                                var c_quoteHtml = "";//判断是否有回复评论
                                                if (null != data.replyAskRespond.replyaskrespondcomments[i].parentRespondCommentId && "" != data.replyAskRespond.replyaskrespondcomments[i].parentRespondCommentId) {
                                                    if (null != data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment) {
                                                        if ("ac618998-ffe3-4300-a391-cd581f74078c" == data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.stateId)
                                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.user.userName + "：评论已被删除</p></div>";
                                                        else
                                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.user.userName + "：" + data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.commentContent + "</p></div>";
                                                    }
                                                }
                                                _js_comment_listHtml += "<li class='comment-item clearfix'><div class='comment-user'><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank'><img src='" + data.replyAskRespond.replyaskrespondcomments[i].user.photo + "' class='photo'></a></div><dl>" + userName + "<dd>" + c_quoteHtml + "" + c_infoHtml + "</dd></dl></li>";
                                            }
                                            _js_comment_listHtml += "</ul>";
                                        }
                                        _js_comment_listHtml += "</div>";
                                        if (currentUserId == data.replyAskRespond.userId)
                                            _j_pager_boxHtml += "<div class='comment-wrap _js_comments is_foldup_detail' style='display: block;'><b class='arrow' style='left: 40px;'><i></i></b>" + _js_comment_listHtml + "<div class='comment-add clearfix _j_word'><textarea class='_j_content _j_word_check' onkeyup='_j_word_checkonkeyup(this)' data-replyAskRespondCommentId='' data-userName=''></textarea><span class='word-count'><span class='_j_word_num'>0</span>/<span class='_j_max_num'>600</span> 字</span><input class='btn-comment _j_publish_comment' type='button' value='回复' data-replyAskRespondId='" + data.replyAskRespond.replyAskRespondId + "' onclick='_j_publish_commentclick(this)'></div></div><div class='editor-outer _j_editorOuter _js_editorWrap _js_forFixTitle hide'><div class='wysiwyg-container wysiwyg-active' style='width: 700px;margin: 0px;padding: 0px;'><div class='editor-container wysiwyg-editor' style='width: 700px;margin: 0px;padding: 0px;'><div id='myreplyAskRespondEditor'></div></div></div><div class='editor-scroll'><div class='aa-ft'><input class='btn-comment _j_submit_answer_btn' type='button' data-replyAskRespondId='" + data.replyAskRespond.replyAskRespondId + "' onclick='update_myreplyAskRespond(this)' value='提交回答'></div></div></div></li>";
                                        else
                                            _j_pager_boxHtml += "<div class='comment-wrap _js_comments is_foldup_detail' style='display: block;'><b class='arrow' style='left: 40px;'><i></i></b>" + _js_comment_listHtml + "<div class='comment-add clearfix _j_word'><textarea class='_j_content _j_word_check' onkeyup='_j_word_checkonkeyup(this)' data-replyAskRespondCommentId='' data-userName=''></textarea><span class='word-count'><span class='_j_word_num'>0</span>/<span class='_j_max_num'>600</span> 字</span><input class='btn-comment _j_publish_comment' type='button' value='回复' data-replyAskRespondId='" + data.replyAskRespond.replyAskRespondId + "' onclick='_j_publish_commentclick(this)'></div></div></li>";
                                    }
                                }
                                if (null==data.replyAskRespond||data.replyAskRespond.optimumAnswer == "false")
                                {
                                    if (null != data.optimumAnswerReplyAskRespond)//当前用户的回复问答
                                    {
                                        var _js_zanchildrenspanNum = data.optimumAnswerReplyAskRespond.replyAskRespondTopNum;
                                        var _js_just_youHtml = "";
                                        if (currentUserId == data.askRespond.userId)//如果当前登录用户不是问答主人不能进行采纳为最佳答案
                                        {
                                            if (data.askRespond.stateId != "2130f38e-48b2-4e7e-a4cf-120aa3a149af")//如果当前问答状态不等于已采纳答案时,显示最佳答案
                                                _js_just_youHtml = "<div class='fr'><a class='btn-adopt _js_just_you' data-replyAskRespondId='" + data.optimumAnswerReplyAskRespond.replyAskRespondId + "' onclick='accept_replyAskRespond(this)'>采纳为最佳答案</a></div>";
                                        }
                                        _j_pager_boxHtml += "<li class='answer-item clearfix _j_answer_item _js_answer14082617 '><div class='answer-side _js_answerAva'><a class='btn-ding _js_zan ' data-replyAskRespondId='"+data.optimumAnswerReplyAskRespond.replyAskRespondId+"' onclick='insert_replyAskRespondTop(this)'><i></i><span>" + _js_zanchildrenspanNum + "</span></a></div><div class='answer-content _js_answer_content'><div class='answer-info clearfix'><div class='user-bar fl'><a class='_j_filter_click avatar' href='front_desk/users/personalSpace.html?userId=" + data.optimumAnswerReplyAskRespond.user.userId + "' target='_blank'><img src='" + data.optimumAnswerReplyAskRespond.user.photo + "' width='48' height='48' class='photo'></a><a class='name' href='front_desk/users/personalSpace.html?userId=" + data.optimumAnswerReplyAskRespond.user.userId + "' target='_blank'>" + data.optimumAnswerReplyAskRespond.user.userName + "</a></div><ul class='answer-medal fr'><li class='gold'><div class='btn'><i></i><span>题主采纳</span></div></li></ul></div><div class='_j_short_answer_item'><div class='_j_long_answer_item'><div class='_j_answer_html'>" + data.optimumAnswerReplyAskRespond.replyAskRespondContent + "</div></div></div></div>";
                                        _j_pager_boxHtml += "<div class='a-operate _js_operate clearfix'><div class='fl'><div class='cmt-toggle'><a class='_js_slideComment' onclick='insert_replyAskRespondComment(this)'><i></i><span>添加评论</span></a></div><div class='pub-time'><span>发布于 " + format_time(data.optimumAnswerReplyAskRespond.releaseTime) + "</span></div></div>" + _js_just_youHtml + "</div>";
                                        var _js_comment_listHtml = "<div class='_js_comment_list'>";
                                        if (null != data.optimumAnswerReplyAskRespond.replyaskrespondcomments) {
                                            _js_comment_listHtml += "<h3 class='comment-title' style=''>全部评论</h3><ul class='comment-list _j_comment_list_ul'>";
                                            for (var i = 0; i < data.optimumAnswerReplyAskRespond.replyaskrespondcomments.length; i++) {
                                                var userName = "";//判断该评论信息是答主还是题主
                                                if (data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].userId == data.askRespond.userId)
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userName + "</a><span class='answer_owner' style='margin-left: 6px'>题主</span>: " + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                                else if (data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].userId == data.optimumAnswerReplyAskRespond.userId)
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userName + "</a><span class='answer_owner' style='margin-left: 6px'>答主</span>: " + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                                else
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userName + "</a>: " + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                                var c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' data-userName='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                                if (currentUserId == data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].userId)//如果当前登录用户为当前回复评论用户显示删除评论按钮
                                                    c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' data-userName='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='_j_delete_comment fr' data-replyAskRespondCommentId='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='delete_replyAskRespondComment(this)'>删除</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                                var c_quoteHtml = "";//判断是否有回复评论
                                                if (null != data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentRespondCommentId && "" != data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentRespondCommentId) {
                                                    if (null != data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentrespondcomment) {
                                                        if ("ac618998-ffe3-4300-a391-cd581f74078c" == data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentrespondcomment.stateId)
                                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentrespondcomment.user.userName + "：评论已被删除</p></div>";
                                                        else
                                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentrespondcomment.user.userName + "：" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].parentrespondcomment.commentContent + "</p></div>";
                                                    }
                                                }
                                                _js_comment_listHtml += "<li class='comment-item clearfix'><div class='comment-user'><a href='front_desk/users/personalSpace.html?userId=" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank'><img src='" + data.optimumAnswerReplyAskRespond.replyaskrespondcomments[i].user.photo + "' class='photo'></a></div><dl>" + userName + "<dd>" + c_quoteHtml + "" + c_infoHtml + "</dd></dl></li>";
                                            }
                                            _js_comment_listHtml += "</ul>";
                                        }
                                        _js_comment_listHtml += "</div>";
                                        _j_pager_boxHtml += "<div class='comment-wrap _js_comments is_foldup_detail' style='display: block;'><b class='arrow' style='left: 40px;'><i></i></b>" + _js_comment_listHtml + "<div class='comment-add clearfix _j_word'><textarea class='_j_content _j_word_check' onkeyup='_j_word_checkonkeyup(this)' data-replyAskRespondCommentId='' data-userName=''></textarea><span class='word-count'><span class='_j_word_num'>0</span>/<span class='_j_max_num'>600</span> 字</span><input class='btn-comment _j_publish_comment' type='button' value='回复' data-replyAskRespondId='" + data.optimumAnswerReplyAskRespond.replyAskRespondId + "' onclick='_j_publish_commentclick(this)'></div></div></li>";
                                    }
                                }
                                if (null != data.replyAskResponds)
                                {
                                    for (var i = 0; i < data.replyAskResponds.length; i++)
                                    {
                                        var _js_zanchildrenspanNum = data.replyAskResponds[i].replyAskRespondTopNum;
                                        var _js_just_youHtml = "";
                                        if (currentUserId == data.askRespond.userId)//如果当前登录用户不是问答主人不能进行采纳为最佳答案
                                        {
                                            if (data.askRespond.stateId != "2130f38e-48b2-4e7e-a4cf-120aa3a149af")//如果当前问答状态不等于已采纳答案时,显示最佳答案
                                                _js_just_youHtml = "<div class='fr'><a class='btn-adopt _js_just_you' data-replyAskRespondId='" + data.replyAskResponds[i].replyAskRespondId + "' onclick='accept_replyAskRespond(this)'>采纳为最佳答案</a></div>";
                                        }
                                        _j_pager_boxHtml += "<li class='answer-item clearfix _j_answer_item _js_answer14082617 '><div class='answer-side _js_answerAva'><a class='btn-ding _js_zan ' data-replyAskRespondId='"+data.replyAskResponds[i].replyAskRespondId+"' onclick='insert_replyAskRespondTop(this)'><i></i><span>" + _js_zanchildrenspanNum + "</span></a></div><div class='answer-content _js_answer_content'><div class='answer-info clearfix'><div class='user-bar fl'><a class='_j_filter_click avatar' href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].user.userId + "' target='_blank'><img src='" + data.replyAskResponds[i].user.photo + "' width='48' height='48' class='photo'></a><a class='name' href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].user.userId + "' target='_blank'>" + data.replyAskResponds[i].user.userName + "</a></div></div><div class='_j_short_answer_item'><div class='_j_long_answer_item'><div class='_j_answer_html'>" + data.replyAskResponds[i].replyAskRespondContent + "</div></div></div></div>";
                                        _j_pager_boxHtml+="<div class='a-operate _js_operate clearfix'><div class='fl'><div class='cmt-toggle'><a class='_js_slideComment' onclick='insert_replyAskRespondComment(this)'><i></i><span>添加评论</span></a></div><div class='pub-time'><span>发布于 "+format_time(data.replyAskResponds[i].releaseTime)+"</span></div></div>"+_js_just_youHtml+"</div>";
                                        var _js_comment_listHtml = "<div class='_js_comment_list'>";
                                        if (null != data.replyAskResponds[i].replyaskrespondcomments) {
                                            _js_comment_listHtml += "<h3 class='comment-title' style=''>全部评论</h3><ul class='comment-list _j_comment_list_ul'>";
                                            for (var s = 0; s < data.replyAskResponds[i].replyaskrespondcomments.length; s++) {
                                                var userName = "";//判断该评论信息是答主还是题主
                                                if (data.replyAskResponds[i].replyaskrespondcomments[s].userId == data.askRespond.userId)
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank' class='c-name'>"+data.replyAskResponds[i].replyaskrespondcomments[s].user.userName +"</a><span class='answer_owner' style='margin-left: 6px'>题主</span>: "+data.replyAskResponds[i].replyaskrespondcomments[s].commentContent+"</dt>";
                                                else if (data.replyAskResponds[i].replyaskrespondcomments[s].userId == data.replyAskResponds[i].userId)
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank' class='c-name'>"+data.replyAskResponds[i].replyaskrespondcomments[s].user.userName +"</a><span class='answer_owner' style='margin-left: 6px'>答主</span>: "+data.replyAskResponds[i].replyaskrespondcomments[s].commentContent+"</dt>";
                                                else
                                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank' class='c-name'>"+data.replyAskResponds[i].replyaskrespondcomments[s].user.userName +"</a>: " + data.replyAskResponds[i].replyaskrespondcomments[s].commentContent + "</dt>";
                                                var c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskResponds[i].replyaskrespondcomments[s].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' data-userName='" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                                if (currentUserId == data.replyAskResponds[i].replyaskrespondcomments[s].userId)//如果当前登录用户为当前回复评论用户显示删除评论按钮
                                                    c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskResponds[i].replyaskrespondcomments[s].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' data-userName='" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='_j_delete_comment fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' onclick='delete_replyAskRespondComment(this)'>删除</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                                var c_quoteHtml = "";//判断是否有回复评论
                                                if (null != data.replyAskResponds[i].replyaskrespondcomments[s].parentRespondCommentId && "" != data.replyAskResponds[i].replyaskrespondcomments[s].parentRespondCommentId) {
                                                    if (null != data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment) {
                                                        if ("ac618998-ffe3-4300-a391-cd581f74078c" == data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.stateId)
                                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.user.userName + "：评论已被删除</p></div>";
                                                        else
                                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.user.userName + "：" + data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.commentContent + "</p></div>";
                                                    }
                                                }
                                                _js_comment_listHtml += "<li class='comment-item clearfix'><div class='comment-user'><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank'><img src='" + data.replyAskResponds[i].replyaskrespondcomments[s].user.photo + "' class='photo'></a></div><dl>" + userName + "<dd>" + c_quoteHtml + "" + c_infoHtml + "</dd></dl></li>";
                                            }
                                            _js_comment_listHtml += "</ul>";
                                        }
                                        _js_comment_listHtml += "</div>";
                                        _j_pager_boxHtml += "<div class='comment-wrap _js_comments is_foldup_detail' style='display: block;'><b class='arrow' style='left: 40px;'><i></i></b>" + _js_comment_listHtml + "<div class='comment-add clearfix _j_word'><textarea class='_j_content _j_word_check' onkeyup='_j_word_checkonkeyup(this)' data-replyAskRespondCommentId='' data-userName=''></textarea><span class='word-count'><span class='_j_word_num'>0</span>/<span class='_j_max_num'>600</span> 字</span><input class='btn-comment _j_publish_comment' type='button' value='回复' data-replyAskRespondId='"+data.replyAskResponds[i].replyAskRespondId+"' onclick='_j_publish_commentclick(this)'></div></div></li>";
                                    }
                                }
                                _j_pager_boxHtml += "</div></ul>";
                                $("._j_pager_box").html(_j_pager_boxHtml);
                                if (null != data.replyAskRespond && currentUserId == data.replyAskRespond.userId)
                                {
                                    $('#myreplyAskRespondEditor').on('froalaEditor.video.inserted', function (e, editor, $video) {
                                        $video.attr("width","700px");
                                        $video.css("width","700px");
                                        $video.children("video").attr("width","700px");
                                        $video.children("video").css("width","700px");
                                    });
                                    $('#myreplyAskRespondEditor').froalaEditor({//,'formatOL','formatUL'
                                        imageDefaultWidth: 0,
                                        imageEditButtons: ['imageRemove'],
                                        videoEditButtons: ['videoRemove'],
                                        language: 'zh_cn',
                                        toolbarButtons: ['bold', 'paragraphFormat', 'insertImage', 'insertVideo', '|', 'fullscreen', 'clear', 'undo', 'redo'],
                                        quickInsertButtons: ['image'],
                                        imageUploadURL: 'replyAskRespondController/add_replyAskRespondPhoto',
                                        theme: 'gray',
                                        imageUploadParams: {
                                            id: 'askRespondPhoto'
                                        },
                                        imageResize: false,
                                        videoMaxSize: 1024 * 1024 * 1024,
                                        videoInsertButtons: ['videoUpload'],
                                        videoUploadURL: 'replyAskRespondController/add_replyAskRespondVideo',
                                        videoUploadParams: {
                                            id: 'replyAskRespondVideo'
                                        },
                                        paragraphFormat: {
                                            N: '正文',
                                            H3: 'H1'
                                        },
                                        listAdvancedTypes: false
                                    }).on('froalaEditor.image.inserted', function (e, editor, $img, response) {
                                        var image = new Image();
                                        image.src = $img.attr("src");
                                        image.onload = function () {
                                            var width = image.width;
                                            var height = image.height;
                                            if (width > 700) {
                                                width = 700;
                                                var replyHeadPhoto = $("#replyHeadPhoto").val();
                                                if (null == replyHeadPhoto || "" == replyHeadPhoto)
                                                    $("#replyHeadPhoto").val($img.attr("src"));
                                            }
                                            $img.attr("width", width + "px");
                                            $img.attr("onclick", "showImagealert(this.src)");
                                        }
                                    });
                                    $("#my_replyAskRespondBackups").val(data.replyAskRespond.replyAskRespondContent);
                                    $("#myreplyAskRespondEditor").children("div").children(".fr-element").html(data.replyAskRespond.replyAskRespondContent);
                                }
                            }
                            else
                                showNoCloseAlert("亲爱的蜂蜂,暂无数据或问答已被删除");
                        }else
                            showNoCloseAlert("亲爱的蜂蜂,暂无数据或问答已被删除");
                    }
                });
            }
            else
                showNoCloseAlert("亲爱的蜂蜂,不要随便改地址栏中的参数哦");
        }
    );
    //点击加载更多回复问答
    function load_replyAskRespond(obj)
    {
        var currentUserId=$("#currentUserId").val();
        var askRespondId=$("#askRespondId").val();
        var userId=$("#userId").val();
        var stateId=$("#stateId").val();
        var index=$(obj).attr("data-index");
        index=parseInt(index)+1;
        $(obj).parent().parent().removeClass("hide");
        $(obj).parent().parent().next().addClass("hide");
        $.ajax({
            url:"replyAskRespondController/load_replyAskRespondByaskRespondIdAndIndex",
            dataType:"json",
            type:"post",
            data:{askRespondId:askRespondId,pageIndex:index,currentUserId:currentUserId},
            success:function(data)
            {
                if(null!=data)
                {
                    if (null != data.replyAskResponds)
                    {
                        var normal_answer_wrapHtml="";
                        for (var i = 0; i < data.replyAskResponds.length; i++)
                        {
                            var _js_zanchildrenspanNum = data.replyAskResponds[i].replyAskRespondTopNum;
                            var _js_just_youHtml = "";
                            if (currentUserId == userId)//如果当前登录用户不是问答主人不能进行采纳为最佳答案
                            {
                                if (stateId != "2130f38e-48b2-4e7e-a4cf-120aa3a149af")//如果当前问答状态不等于已采纳答案时,显示最佳答案
                                    _js_just_youHtml = "<div class='fr'><a class='btn-adopt _js_just_you' data-replyAskRespondId='" + data.replyAskResponds[i].replyAskRespondId + "' onclick='accept_replyAskRespond(this)'>采纳为最佳答案</a></div>";
                            }
                            normal_answer_wrapHtml += "<li class='answer-item clearfix _j_answer_item _js_answer14082617 '><div class='answer-side _js_answerAva'><a class='btn-ding _js_zan ' data-replyAskRespondId='"+data.replyAskResponds[i].replyAskRespondId+"' onclick='insert_replyAskRespondTop(this)'><i></i><span>" + _js_zanchildrenspanNum + "</span></a></div><div class='answer-content _js_answer_content'><div class='answer-info clearfix'><div class='user-bar fl'><a class='_j_filter_click avatar' href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].user.userId + "' target='_blank'><img src='" + data.replyAskResponds[i].user.photo + "' width='48' height='48' class='photo'></a><a class='name' href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].user.userId + "' target='_blank'>" + data.replyAskResponds[i].user.userName + "</a></div></div><div class='_j_short_answer_item'><div class='_j_long_answer_item'><div class='_j_answer_html'>" + data.replyAskResponds[i].replyAskRespondContent + "</div></div></div></div>";
                            normal_answer_wrapHtml+="<div class='a-operate _js_operate clearfix'><div class='fl'><div class='cmt-toggle'><a class='_js_slideComment' onclick='insert_replyAskRespondComment(this)'><i></i><span>添加评论</span></a></div><div class='pub-time'><span>发布于 "+format_time(data.replyAskResponds[i].releaseTime)+"</span></div></div>"+_js_just_youHtml+"</div>";
                            var _js_comment_listHtml = "<div class='_js_comment_list'>";
                            if (null != data.replyAskResponds[i].replyaskrespondcomments) {
                                _js_comment_listHtml += "<h3 class='comment-title' style=''>全部评论</h3><ul class='comment-list _j_comment_list_ul'>";
                                for (var s = 0; s < data.replyAskResponds[i].replyaskrespondcomments.length; s++) {
                                    var userName = "";//判断该评论信息是答主还是题主
                                    if (data.replyAskResponds[i].replyaskrespondcomments[s].userId == userId)
                                        userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank' class='c-name'>"+data.replyAskResponds[i].replyaskrespondcomments[s].user.userName +"</a><span class='answer_owner' style='margin-left: 6px'>题主</span>: "+data.replyAskResponds[i].replyaskrespondcomments[s].commentContent+"</dt>";
                                    else if (data.replyAskResponds[i].replyaskrespondcomments[s].userId == data.replyAskResponds[i].userId)
                                        userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank' class='c-name'>"+data.replyAskResponds[i].replyaskrespondcomments[s].user.userName +"</a><span class='answer_owner' style='margin-left: 6px'>答主</span>: "+data.replyAskResponds[i].replyaskrespondcomments[s].commentContent+"</dt>";
                                    else
                                        userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank' class='c-name'>"+data.replyAskResponds[i].replyaskrespondcomments[s].user.userName +"</a>: " + data.replyAskResponds[i].replyaskrespondcomments[s].commentContent + "</dt>";
                                    var c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskResponds[i].replyaskrespondcomments[s].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' data-userName='" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                    if (currentUserId == data.replyAskResponds[i].replyaskrespondcomments[s].userId)//如果当前登录用户为当前回复评论用户显示删除评论按钮
                                        c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskResponds[i].replyaskrespondcomments[s].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' data-userName='" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='_j_delete_comment fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' onclick='delete_replyAskRespondComment(this)'>删除</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskResponds[i].replyaskrespondcomments[s].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                    var c_quoteHtml = "";//判断是否有回复评论
                                    if (null != data.replyAskResponds[i].replyaskrespondcomments[s].parentRespondCommentId && "" != data.replyAskResponds[i].replyaskrespondcomments[s].parentRespondCommentId) {
                                        if (null != data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment) {
                                            if ("ac618998-ffe3-4300-a391-cd581f74078c" == data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.stateId)
                                                c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.user.userName + "：评论已被删除</p></div>";
                                            else
                                                c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.user.userName + "：" + data.replyAskResponds[i].replyaskrespondcomments[s].parentrespondcomment.commentContent + "</p></div>";
                                        }
                                    }
                                    _js_comment_listHtml += "<li class='comment-item clearfix'><div class='comment-user'><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskResponds[i].replyaskrespondcomments[s].user.userId + "' target='_blank'><img src='" + data.replyAskResponds[i].replyaskrespondcomments[s].user.photo + "' class='photo'></a></div><dl>" + userName + "<dd>" + c_quoteHtml + "" + c_infoHtml + "</dd></dl></li>";
                                }
                                _js_comment_listHtml += "</ul>";
                            }
                            _js_comment_listHtml += "</div>";
                            normal_answer_wrapHtml += "<div class='comment-wrap _js_comments is_foldup_detail' style='display: block;'><b class='arrow' style='left: 40px;'><i></i></b>" + _js_comment_listHtml + "<div class='comment-add clearfix _j_word'><textarea class='_j_content _j_word_check' onkeyup='_j_word_checkonkeyup(this)' data-replyAskRespondCommentId='' data-userName=''></textarea><span class='word-count'><span class='_j_word_num'>0</span>/<span class='_j_max_num'>600</span> 字</span><input class='btn-comment _j_publish_comment' type='button' value='回复' data-replyAskRespondId='"+data.replyAskResponds[i].replyAskRespondId+"' onclick='_j_publish_commentclick(this)'></div></div></li>";
                        }
                        console.log($("#normal_answer_wrap").html());
                        $("#normal_answer_wrap").append(normal_answer_wrapHtml);
                        console.log($("#normal_answer_wrap").html());
                        $(obj).attr("data-index",data.currentIndex);
                        $(obj).parent().parent().removeClass("hide");
                        $(obj).parent().parent().next().addClass("hide");
                        console.log(data.currentIndex);
                        console.log(data.replyAskResponds.length)
                    }
                    else
                        $(obj).parent().parent().parent().css("display","none");
                }
            }
        });
    }
    //点击补充问题
    $(".qt-modify").click(
        function()
        {
            var display=$("#_js_answerText").css("display");
            if(display=="block")
                $("#_js_answerText").css("display","none");
            else
                $("#_js_answerText").css("display","block");
        }
    );
    //点击放弃修改
    $("._j_do_cancel").click(
        function()
        {
            $("#askRespondDetailEditor").children("div").children(".fr-element").html($("#askRespondDetail").val());
            $("#_js_answerText").css("display","none");
        }
    );
    //点击修改详细问答内容
    $("._j_do_submit").click(
        function()
        {
            var askRespondId=$("#askRespondId").val();
            var askRespondDetail=$('div#askRespondDetailEditor').froalaEditor('html.get');
            if(null!=askRespondDetail&&""!=askRespondDetail&&"<p><br></p>"!=askRespondDetail)
            {
                $.ajax({
                    url:"askRespondController/update_askRespondDetailByaskRespondId",
                    dataType:"json",
                    type:"post",
                    data:{askRespondId:askRespondId,askRespondDetail:askRespondDetail},
                    success:function(data)
                    {
                        if(data.result)
                        {
                            $(".q-tags").html(data.askRespondDetail);
                            $("#askRespondDetail").val(data.askRespondDetail);
                            $("#askRespondDetailEditor").children("div").children(".fr-element").html(data.askRespondDetail);
                            $("#_js_answerText").css("display","none");
                            showsucceedalert("修改内容成功");
                        }
                        else
                        {
                            $("#askRespondDetailEditor").children("div").children(".fr-element").html($("#askRespondDetail").val());
                            showalert("修改内容失败,已被回复问答或未知错误");
                        }
                    }
                });
            }
            else
                showalert("内容不能为空");
        }
    );
    //回复评论textarea
    function _j_word_checkonkeyup(obj)
    {
        var text=$(obj).val();
        if(text.length>600)
            $(obj).val(text.substring(0,600));
        $(obj).next().children("._j_word_num").text($(obj).val().length);
    }
    //点击回复评论按钮
    function _j_publish_commentclick(obj)
    {
        var textarea=$(obj).prev().prev();
        var value=$(textarea).val();
        var replyAskRespondId=$(obj).attr("data-replyAskRespondId");
        var parentRespondCommentId=null;
        var userName1=$(textarea).attr("data-userName");
        var userNames="回复 @"+userName1+":";
        if(null!=userName1&&""!=userName1)
        {
            if(value.indexOf(userNames)!=-1)
            {
                parentRespondCommentId=$(textarea).attr("data-replyAskRespondCommentId");
                value=value.replace(userNames,'');
            }
        }
        $.ajax({
            url:"replyAskRespondCommentController/insert_replyAskRespondComment",
            dataType:"json",
            type:"post",
            data:{CommentContent:value,replyAskRespondId:replyAskRespondId,parentRespondCommentId:parentRespondCommentId},
            success:function(data)
            {
                if(null!=data)
                {
                    if(data.result)
                    {
                        $(textarea).attr("data-userName",'');
                        $(textarea).attr("data-replyAskRespondId",'');
                        $(textarea).val("");
                        var _js_comment_listHtml = "";
                        if (null != data.replyAskRespond.replyaskrespondcomments)
                        {
                            var userId=$("#userId").val();
                            var currentUserId=$("#currentUserId").val();
                            _js_comment_listHtml += "<h3 class='comment-title' style=''>全部评论</h3><ul class='comment-list _j_comment_list_ul'>";
                            for (var i = 0; i < data.replyAskRespond.replyaskrespondcomments.length; i++) {
                                var userName = "";//判断该评论信息是答主还是题主
                                if (data.replyAskRespond.replyaskrespondcomments[i].userId == userId)
                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "</a><span class='answer_owner' style='margin-left: 6px'>题主</span>: " + data.replyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                else if (data.replyAskRespond.replyaskrespondcomments[i].userId == data.replyAskRespond.userId)
                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "</a><span class='answer_owner' style='margin-left: 6px'>答主</span>: " + data.replyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                else
                                    userName = "<dt><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank' class='c-name'>" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "</a>: " + data.replyAskRespond.replyaskrespondcomments[i].commentContent + "</dt>";
                                var c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskRespond.replyaskrespondcomments[i].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' data-userName='" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                if (currentUserId == data.replyAskRespond.replyaskrespondcomments[i].userId)//如果当前登录用户为当前回复评论用户显示删除评论按钮
                                    c_infoHtml = "<div class='c-info'><span class='c-time fl'>" + format_time(data.replyAskRespond.replyaskrespondcomments[i].releaseTime) + "</span><a class='c-reply _j_publish_reply fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' data-userName='" + data.replyAskRespond.replyaskrespondcomments[i].user.userName + "' onclick='reply_replyAskRespondComment(this)'>回复</a><a class='_j_delete_comment fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='delete_replyAskRespondComment(this)'>删除</a><a class='c-report fr' data-replyAskRespondCommentId='" + data.replyAskRespond.replyaskrespondcomments[i].replyAskRespondCommentId + "' onclick='report_replyAskRespondComment(this)'>举报</a></div>";
                                var c_quoteHtml = "";//判断是否有回复评论
                                if (null != data.replyAskRespond.replyaskrespondcomments[i].parentRespondCommentId && "" != data.replyAskRespond.replyaskrespondcomments[i].parentRespondCommentId) {
                                    if (null != data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment) {
                                        if ("ac618998-ffe3-4300-a391-cd581f74078c" == data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.stateId)
                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.user.userName + "：评论已被删除</p></div>";
                                        else
                                            c_quoteHtml = "<div class='c-quote'><p>@" + data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.user.userName + "：" + data.replyAskRespond.replyaskrespondcomments[i].parentrespondcomment.commentContent + "</p></div>";
                                    }
                                }
                                _js_comment_listHtml += "<li class='comment-item clearfix'><div class='comment-user'><a href='front_desk/users/personalSpace.html?userId=" + data.replyAskRespond.replyaskrespondcomments[i].user.userId + "' target='_blank'><img src='" + data.replyAskRespond.replyaskrespondcomments[i].user.photo + "' class='photo'></a></div><dl>" + userName + "<dd>" + c_quoteHtml + "" + c_infoHtml + "</dd></dl></li>";
                            }
                            _js_comment_listHtml += "</ul>";
                            $(obj).parent().prev().html(_js_comment_listHtml);
                        }
                    }
                    else
                        showalert("回复评论错误");
                }
                else
                    showalert("回复评论错误");
            }
        });
    }
    //点击删除问答
    $(".qt-delete").click(
        function()
        {
            var askRespondId=$("#askRespondId").val();
            $.ajax({
                url:"askRespondController/delete_askRespondByaskRespondId",
                dataType:"json",
                type:"post",
                data:{askRespondId:askRespondId},
                success:function(data)
                {
                    if(data.result)
                        window.location.href="front_desk/askRespond/askRespond.html";
                    else
                        showalert(data.message);
                }
            });
        }
    );
    //获取地址栏中的参数
    function GetQueryString(name)
    {
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if(r!=null)return  unescape(r[2]); return null;
    }
    //转换日期
    function format_time(replyTime)
    {
        return replyTime.substring(0,replyTime.lastIndexOf(".")).replace("T"," ");
    }
    //显示具有确认按钮模态框
    function showalert(msg)
    {
        var width=$(window).width();
        var height=$(window).height();
        var left=width/2-210;
        var top=height/2-130;
        $("body").append("<div id='_j_layer_0' class='layer _j_layer' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 10001;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7;z-index: -1;'></div><div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px;z-index: 0; overflow: hidden;'><div id='popup_container1' class='popup-box new-popbox pop_no_margin' style='position: absolute; opacity: 1; background: rgb(255, 255, 255); z-index: 1; width: 420px; left: "+left+"px; top:"+top+"px;'><a class='close-btn _j_close' onclick='closeModel(this)' data-id='_j_layer_0'><i></i></a><div class='pop-ico' id='_j_alertpopicon'><i class='i1'></i></div><div class='pop-ctn'><p class='hd _j_content'>"+msg+"</p><p class='bd _j_detail'></p></div><div class='pop-btns'><a role='button' tabindex='0' class='popbtn popbtn-submit _j_close' onclick='closeModel(this)' data-id='_j_layer_0'>&nbsp;确定&nbsp;</a></div></div></div></div>");
    }
    <!--显示成功提示框,具有确认按钮-->
    function showsucceedalert(msg)
    {
        var width=$(window).width();
        var height=$(window).height();
        var left=width/2-210;
        var top=height/2-130;
        $("body").append("<div id='_j_layer_4' class='layer _j_layer' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 10001;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7; z-index: -1;'></div><div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden;'><div id='popup_container4' class='popup-box new-popbox pop_no_margin' style='position: absolute; opacity: 1; background: rgb(255, 255, 255); z-index: 1; width: 420px; left:"+left+"px; top:"+top+"px;'><a class='close-btn _j_close' onclick='closeModel(this)' data-id='_j_layer_4'><i></i></a><div class='pop-ico' id='_j_alertpopicon'><i class='i3'></i></div><div class='pop-ctn'><p class='hd _j_content'>"+msg+"</p><p class='bd _j_detail'></p></div><div class='pop-btns'><a role='button' tabindex='0' class='popbtn popbtn-submit _j_close' onclick='closeModel(this)' data-id='_j_layer_4'>&nbsp;确定&nbsp;</a></div></div></div></div>");
    }
    <!--显示不可关闭弹出框-->
    function showNoCloseAlert(msg)
    {
        var width=$(window).width();
        var height=$(window).height();
        var left=width/2-210;
        var top=height/2-130;
        $("body").append("<div id='_j_layer_5' class='layer _j_layer' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 10001;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7; z-index: -1;'></div><div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden;'><div id='popup_container5' class='popup-box new-popbox pop_no_margin' style='position: absolute; opacity: 1; background: rgb(255, 255, 255); z-index: 1; width: 420px; left:"+left+"px; top:"+top+"px;'><a class='close-btn _j_close'  data-id='_j_layer_5'><i></i></a><div class='pop-ico' id='_j_alertpopicon'><i class='i5'></i></div><div class='pop-ctn'><p class='hd _j_content'>"+msg+"</p><p class='bd _j_detail'></p></div><div class='pop-btns'><a role='button' tabindex='0' class='popbtn popbtn-submit _j_close' data-id='_j_layer_5'>&nbsp;确定&nbsp;</a></div></div></div></div>");
    }
    <!--显示正确模态框-->
    function showrightalert(msg)
    {
        var width=$(window).width();
        var height=$(window).height();
        var left=width/2-210;
        var top=height/2-130;
        $("body").append("<div id='_j_layer_7' class='layer _j_layer' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 10001;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7; z-index: -1;'></div><div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden;'><div id='popup_container6' class='popup-box new-popbox pop_no_margin' style='position: absolute; opacity: 1; background: rgb(255, 255, 255); z-index: 1; width: 420px; left: "+left+"px; top: "+top+"px;'><a class='close-btn _j_close' onclick='closeModel(this)' data-id='_j_layer_7'><i></i></a><div class='pop-ico' id='_j_alertpopicon'><i class='i3'></i></div><div class='pop-ctn'><p class='hd _j_content'>"+msg+"</p><p class='bd _j_detail'></p></div><div class='pop-btns'><a role='button' tabindex='0' class='popbtn popbtn-submit _j_close' onclick='closeModel(this)' data-id='_j_layer_7'>&nbsp;确定&nbsp;</a></div></div></div></div>");
    }
    //关闭模态框
    function closeModel(obj)
    {
        var data_id=$(obj).attr("data-id");
        $("#"+data_id).remove();
        if(data_id=="_j_layer_4"||data_id=="_j_layer_6")
            window.location.href="front_desk/askRespond/replyRespond.html?askRespondId="+$("#askRespondId").val();
    }
    //显示图片模态框
    function showImagealert(src)
    {
        document.documentElement.style.overflowY = 'hidden';//隐藏右边滚动条
        $("body").append("<div id='_j_layer_6' class='layer _j_layer' onclick='closeImagealert(this)' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 551; display: block;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7; z-index: -1;'></div><div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden auto;'><div class='layer_content _j_content dialog_overflow' style='position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 1; overflow: hidden auto; opacity: 1;'><div class='layer_dialog _j_dialog photo-layer dialog_overflow'><div class='dialog_body _j_content'><div class='stage-wrap' style='line-height: 929px;'><div class='aload1 _j_loading1' style='display: none;'></div><div class='aload2 _j_loading2' style='display: none;'></div><img class='_j_img' src='"+src+"'></div></div></div></div></div></div>")
    }
    //显示具有确认和取消模态框
    function showAffirmAndCancelModel(msg,replyAskRespondId)
    {
        var width=$(window).width();
        var height=$(window).height();
        var left=width/2-210;
        var top=height/2-130;
        $("body").append("<div id='_j_layer_1' class='layer _j_layer' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 10001;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7; z-index: -1;'></div><div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden;'><div id='popup_container7' class='popup-box new-popbox pop_no_margin' style='position: absolute; opacity: 1; background: rgb(255, 255, 255); z-index: 1; width: 420px; left: "+left+"px; top:"+top+"px;'><a class='close-btn _j_close _j_false' data-id='_j_layer_1' onclick='closeAffirmAndCancelModel(this)'><i></i></a><div class='pop-ico' id='popup_icon'><i class='i2'></i></div><div class='pop-ctn'><p class='hd _j_content'>"+msg+"</p></div><div class='pop-btns'><a role='button' tabindex='0' class='popbtn popbtn-cancel popbtn-half _j_close _j_false' data-id='_j_layer_1' onclick='closeAffirmAndCancelModel(this)'>&nbsp;取消&nbsp;</a><a role='button' tabindex='0' class='popbtn popbtn-submit popbtn-half _j_close _j_true' data-id='_j_layer_1' data-replyAskRespondId='"+replyAskRespondId+"' onclick='clickAffirmAndCancelModelAffirmButton(this)'>&nbsp;确定&nbsp;</a></div></div></div></div>")
    }
    //关闭确认和取消模态框
    function closeAffirmAndCancelModel(obj)
    {
        var data_id=$(obj).attr("data-id");
        $("#"+data_id).remove();
    }
    //点击确认采纳该问答时
    function clickAffirmAndCancelModelAffirmButton(obj)
    {
        var data_id=$(obj).attr("data-id");
        var askRespondId=$("#askRespondId").val();
        var replyAskRespondId=$(obj).attr("data-replyAskRespondId");
        $("#"+data_id).remove();
        $.ajax({
            url:"replyAskRespondController/update_replyAskRespondByreplyAskRespondId",
            dataType:"json",
            type:"post",
            data:{askRespondId:askRespondId,replyAskRespondId:replyAskRespondId},
            success:function(data)
            {
                if(data)
                    window.location.href=window.location.href;
                else
                    showalert("采纳该答案失败");
            }
        });
    }
    //搜索问答
    $("#_j_wenda_seach_input").keyup(
        function()
        {
            var value=$(this).val();
            if(null!=value&&""!=value)
            {
                $.ajax({
                    url:"askRespondController/find_askRespondByaskRespondTitle_key",
                    dataType:"json",
                    type:"post",
                    data:{keyvalue:value},
                    success:function(data)
                    {
                        if(null!=data&&0<data.length)
                        {
                            var is=data.length;
                            if(is>10)
                                is=10;
                            var _j_suggest_boxHtml="<div class='bd-question'><h3>问题 ("+data.length+")</h3><ul>";
                            for(var i=0;i<is;i++)
                            {
                                _j_suggest_boxHtml+="<li class='_j_search_item'><a target='_blank' href='front_desk/askRespond/replyRespond.html?askRespondId="+data[i].askRespondId+"' data-cs-p='suggest_detail'>"+data[i].askRespondTitle+"<span>"+data[i].replyAskRespondNum+" 回答</span></a></li>";
                            }
                            _j_suggest_boxHtml+="</ul></div><div class='bd-more'><a href='front_desk/askRespond/askRespond.html?keyvalue="+encodeURI(encodeURI(value))+"' data-cs-p='suggest_more'><i></i>查看全部关于“"+value+"”的搜索结果</a></div>";
                            $("._j_suggest_box").html(_j_suggest_boxHtml);
                            $("._j_suggest_box").removeClass("hide");
                        }
                        else
                            $("._j_suggest_box").addClass("hide");
                    }
                });
            }
            else
                $("._j_suggest_box").addClass("hide");
        }
    );
    //关闭显示模态框
    function closeImagealert(obj)
    {
        document.documentElement.style.overflowY = 'auto';//显示右边滚动条
        $(obj).remove();
    }
    //页面大小变更,更改模态框在页面显示的位置
    window.onresize = function(){
        var width=$(window).width();
        var height=$(window).height();
        width=width/2-210;
        height=height/2-130;
        var width1=$(window).width()/2-350;
        var height1=$(window).height()/2-250;
        if(width1<=0)
            width1=0;
        if(height1<=0)
            height1=0;
        $("#popup_container1").css({"left":width+"px","top":height+"px"});
        $("#popup_container2").css({"left":width+"px","top":height+"px"});
        $("#popup_container4").css({"left":width+"px","top":height+"px"});
        $("#popup_container5").css({"left":width+"px","top":height+"px"});
        $("#popup_container6").css({"left":width+"px","top":height+"px"});
        $("#popup_container7").css({"left":width+"px","top":height+"px"});
        if($("#popup_container3").length>0)
            $("#popup_container3").css({"left":width1+"px","top":height1+"px"});
        if($(".popup-body").length>0)
            $(".popup-body").css({"left":width1+"px","top":height1+"px"});
    }
    //点击提交回答按钮
    function insert_replyAskRespond(obj) {
        var loginState = $(obj).attr("data-loginState");
        if (loginState == true || loginState == "true")
        {
            var replyBrief=$("#replyAskRespondEditor").children("div").children(".fr-element").text();
            var replyAskRespondContent = $('div#replyAskRespondEditor').froalaEditor('html.get');
            if (null != replyAskRespondContent && "" != replyAskRespondContent&&null!=replyBrief&&""!=replyBrief) {
                $(obj).addClass("loading");
                var currentUserId = $("#currentUserId").val();
                var askRespondId = $("#askRespondId").val();
                var replyHeadPhoto = $("#replyHeadPhoto").val();
                $.ajax({
                    url: "replyAskRespondController/insert_replyAskRespondByaskRespondId",
                    dataType: "json",
                    type: "post",
                    data: {
                        askRespondId: askRespondId,
                        replyHeadPhoto: replyHeadPhoto,
                        replyAskRespondContent: replyAskRespondContent,
                        currentUserId: currentUserId,
                        replyBrief:replyBrief,
                    },
                    success: function (data) {
                        $(this).removeClass("loading");
                        if (null != data) {
                            if (data.result) {
                                var by = data.by;
                                var pql_listHtml = "<ul>";
                                if (null != data.askResponds) {
                                    for (var i = 0; i < data.askResponds.length; i++) {
                                        var spanb = "";
                                        if (by == "interestLabelId")
                                            spanb = data.askResponds[i].interestlabel.interestLabelName;
                                        else if (by == "cityId")
                                            spanb = data.askResponds[i].city.cityName;
                                        else if (by == "askRespondTitle")
                                            spanb = data.askResponds[i].askRespondTitle;
                                        else if (by == "All")
                                            spanb = "全部";
                                        pql_listHtml += "<li><dl class='pql-item'><dt>" + data.askResponds[i].askRespondTitle + "</dt><dd class='clearfix'><div class='pql-info flt1'><img src='" + data.askResponds[i].user.photo + "' alt=''><span>关于<b>" + spanb + "</b>的讨论</span></div><div class='pql-btn flt2'><a href='front_desk/askRespond/replyRespond.html?askRespondId=" + data.askResponds[i].askRespondId + "'>回答</a></div></dd></dl></li>";
                                    }
                                }
                                pql_listHtml += "</ul>";
                                var replyAskRespondCount = data.replyAskRespondCount;
                                var width1 = $(window).width() / 2 - 350;
                                var height1 = $(window).height() / 2 - 250;
                                if (width1 <= 0)
                                    width1 = 0;
                                if (height1 <= 0)
                                    height1 = 0;
                                var _j_layer_6 = "<div id='_j_layer_6' class='layer _j_layer' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 551;'><div class='layer_mask _j_mask' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(0, 0, 0); opacity: 0.7; z-index: -1;'></div> <div class='layer_content _j_content' style='position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden;'><div class='layer_content _j_content' style='position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 0; overflow: hidden auto; opacity: 0; display: none;'><div class='layer_dialog _j_dialog photo-layer dialog_overflow'><div class='dialog_body _j_content'><div class='stage-wrap'><div class='aload1 _j_loading1'></div><div class='aload2 _j_loading2'></div><img class='_j_img' src=''></div></div></div></div><div class='popup-body' style='position: absolute; opacity: 1; background: rgb(255, 255, 255); z-index: 1; left: " + width1 + "px; top: " + height1 + "px;'><div class='pop-answer-success'><div class='pas-title'>感谢你的回答！</div><div class='pas-desc clearfix'><div class='pas-text flt1'>这是你的第个" + replyAskRespondCount + "回答～<br>你的分享让旅行变得更加简单美好！</div></div></div><div class='pop-question-list'><div class='pql-title'>这些<strong></strong>问题，正期待你的回答～</div><div class='pql-list'>" + pql_listHtml + "</div></div><div class='pop-answer-close _j_close' onclick='closeModel(this)' data-id='_j_layer_6'></div></div></div></div>";
                                $("body").append(_j_layer_6);
                            }
                            else
                                showalert("回复问答出错");
                        }
                    },
                    error: function () {
                        $(this).removeClass("loading");
                    }
                });
            }
            else
                showalert("内容不能为空");
        }
        else
            showalert("未登录,请先登录");
    }
    $("#answerButton ._j_btn_goanswer").click(
        function()
        {
            $.scrollTo("#replyAskRespondEditor",1000);
        }
    );
    //点击添加评论
    function insert_replyAskRespondComment(obj)
    {
        if($(obj).parent().parent().parent().next().next().length>0)
        {
            $(obj).parent().parent().parent().next().next().css("display","none");
        }
        var display=$(obj).parent().parent().parent().next().css("display");
        if(display=="none")
        {
            $(obj).children("span").text("收起评论");
            $(obj).parent().parent().parent().next().css("display","block");
        }
        else
        {
            $(obj).children("span").text("添加评论");
            $(obj).parent().parent().parent().next().css("display","none");
        }
    }
    //点击顶
    function insert_replyAskRespondTop(obj) {
        var replyAskRespondId = $(obj).attr("data-replyAskRespondId");
        $.ajax({
            url:"replyAskRespondTopController/insert_replyAskRespondTop",
            dataType:"json",
            type:"post",
            data:{replyAskRespondId:replyAskRespondId},
            success:function(data) {
                if (data.result==true)
                    $(obj).children("span").text(data.counts);
                else if(data.result==false)
                    showalert("蜂蜂没劲了,顶不动了");
                else if(data.result=="exists")
                    showalert("抱歉,只能顶一次哦");
            }
        });
    }
    //点击完善我的问答
    function showupdate_myreplyAskRespond(obj)
    {
        //my_replyAskRespondBackups;
        $(obj).parent().parent().parent().next().css("display","none");
        var display=$(obj).parent().parent().parent().next().next().css("display");
        if(display=="none")
        {
            $("#myreplyAskRespondEditor").children("div").children(".fr-element").html($("#my_replyAskRespondBackups").val());
            $(obj).parent().parent().parent().next().next().css("display","block");
        }
        else
            $(obj).parent().parent().parent().next().next().css("display","none");
    }
    //点击删除我的问答
    function delete_myreplyAskRespond(obj)
    {
        var replyAskRespondId=$(obj).attr("data-replyAskRespondId");
        $.ajax({
            url:"replyAskRespondController/delete_replyAskRespondByreplyAskRespondId",
            dataType:"json",
            type:"post",
            data:{replyAskRespondId:replyAskRespondId},
            success:function(data)
            {
                if(data)
                {
                    $(obj).parent().parent().parent().parent().remove();
                    showrightalert("删除成功");
                }
                else
                    showalert("删除回复问答失败");
            }
        });
    }
    //点击采纳问答
    function accept_replyAskRespond(obj)
    {
        var replyAskRespondId=$(obj).attr("data-replyAskRespondId");
        var askRespondId=$("#askRespondId").val();
        showAffirmAndCancelModel("确认采纳该回答吗",replyAskRespondId);
    }
    //点击删除评论
    function delete_replyAskRespondComment(obj)
    {
        var replyAskRespondCommentId=$(obj).attr("data-replyAskRespondCommentId");
        $.ajax({
            url:"replyAskRespondCommentController/delete_replyAskRespondCommentByreplyAskRespondCommentId",
            dataType:"json",
            type:"post",
            data:{replyAskRespondCommentId:replyAskRespondCommentId},
            success:function(data)
            {
                if(data)
                    $(obj).parent().parent().parent().parent().remove();
                else
                    showalert("删除该评论失败");
            }
        });
    }
    //退出登录
    function logout()
    {
        $.ajax({
            url:"usersController/loginOut",
            dataType:"json",
            type:"post",
            success:function (data)
            {
                if(data)
                    window.location.href=window.location.href;
            }
        });
    }
    //点击回复评论按钮
    function reply_replyAskRespondComment(obj)
    {
        var textarea=$(obj).parent().parent().parent().parent().parent().parent().next().children("textarea");
        var replyAskRespondCommentId=$(obj).attr("data-replyAskRespondCommentId");
        var userName=$(obj).attr("data-userName");
        textarea.attr({"data-replyAskRespondCommentId":replyAskRespondCommentId,"data-userName":userName});
        textarea.val("回复 @"+userName+":");
        $.scrollTo(textarea,1000);
    }
    //点击举报
    function report_replyAskRespondComment(obj)
    {
        var replyAskRespondCommentId=$(obj).attr("data-replyAskRespondCommentId");
        alert(replyAskRespondCommentId);
    }
    //修改问答内容
    function update_myreplyAskRespond(obj)
    {
        var replyAskRespondId=$(obj).attr("data-replyAskRespondId");
        var replyAskRespondContent=$('div#myreplyAskRespondEditor').froalaEditor('html.get');
        var replyBrief=$("#myreplyAskRespondEditor").children("div").children(".fr-element").text();
        if(null!=replyAskRespondContent&&""!=replyAskRespondContent&&"<p><br/></p>"!=replyAskRespondContent&&"<p><br></p>"!=replyAskRespondContent)
        {
            $.ajax({
                url:"replyAskRespondController/update_replyAskRespondContentByreplyAskRespondId",
                dataType:"json",
                type:"post",
                data:{replyAskRespondId:replyAskRespondId,replyAskRespondContent:replyAskRespondContent,replyBrief:replyBrief},
                success:function(data)
                {
                    if(data.result)
                    {
                        $("#my_replyAskRespondBackups").val(replyAskRespondContent);
                        $("#myreplyAskRespondEditor").children("div").children(".fr-element").html(replyAskRespondContent);
                        $(obj).parent().parent().parent().prev().prev().prev().children("._j_short_answer_item").children("._j_long_answer_item").children("div").html(replyAskRespondContent);
                        $(obj).parent().parent().parent().css("display","none");
                    }
                    else
                        showalert("修改回复问答失败");
                }
            });
        }
        else
            showalert("内容不能为空");
    }
</script>
<!--修改问答详细内容Editor开始-->
<script>
    $(function(){
        $.FroalaEditor.DefineIcon('clear', {NAME: 'remove'});
        $.FroalaEditor.RegisterCommand('clear', {
            title: '清除所有内容',
            focus: false,
            undo: true,
            refreshAfterCallback: true,
            callback: function () {
                this.html.set('');
                this.events.focus();
            }
        });
        $('#askRespondDetailEditor').froalaEditor({
            imageDefaultWidth: 0,
            imageEditButtons: [ 'imageRemove'],
            language: 'zh_cn',
            toolbarButtons: ['undo', 'redo' , 'bold','|','insertImage', 'clear',],
            quickInsertButtons: ['image'],
            imageUploadURL: 'askRespondController/add_askRespondPhoto',
            theme: 'gray',
            charCounterMax: 1000,
            imageUploadParams: {
                id: 'askRespondPhoto'
            }
        }).on('froalaEditor.image.inserted', function (e, editor, $img, response) {
            var image = new Image();
            image.src= $img.attr("src");
            image.onload=function() {
                var width = image.width;
                var height = image.height;
                if (width > 700)
                    width = 700;
                $img.attr("width",width+"px");
                $img.attr("onclick","showImagealert(this.src)");
            }
        });
    });
    //由于ajax请求时,拦截器拦截到未登录时无法登录,所以ajaxSetup方法就是在所有ajax请求结束后执行跳转页面
    $.ajaxSetup({
        //设置ajax请求结束后的执行动作
        complete :
            function(XMLHttpRequest, textStatus) {
                // 通过XMLHttpRequest取得响应头，sessionstatus
                var sessionstatus = XMLHttpRequest.getResponseHeader("sessionstatus");
                if (sessionstatus == "TIMEOUT") {
                    var win = window;
                    while (win != win.top){
                        win = win.top;
                    }
                    var currentHref=win.location.href;
                    win.location.href= XMLHttpRequest.getResponseHeader("CONTEXTPATH")+"?url="+currentHref;
                }
            }
    });
</script>
<!--修改问答详细内容Editor结束-->
<!--回复问答内容Editor开始-->
<script>
    $(function(){
        //当删除图片时,后台进行删除图片
        $('#replyAskRespondEditor').on('froalaEditor.image.removed', function (e, editor, $img){
            $.ajax({
                url:"replyAskRespondController/delete_replyAskRespondPhoto",
                dataType:"json",
                type:"post",
                data:{src:$img.attr("src")}
            })
        });
        $('#replyAskRespondEditor').on('froalaEditor.video.removed', function (e, editor, $video){
            $.ajax({
                url:"replyAskRespondController/delete_replyAskRespondVideo",
                dataType:"json",
                type:"post",
                data:{src:$video.attr("src")}
            });
        });
        $('#replyAskRespondEditor').on('froalaEditor.video.inserted', function (e, editor, $video){
            $video.attr("width","700px");
            $video.css("width","700px");
            $video.children("video").attr("width","700px");
            $video.children("video").css("width","700px");
        });
        $('#replyAskRespondEditor').froalaEditor({//,'formatOL','formatUL'
            imageDefaultWidth: 0,
            imageEditButtons: [ 'imageRemove'],
            videoEditButtons:['videoRemove'],
            language: 'zh_cn',
            toolbarButtons: ['bold','paragraphFormat','insertImage','insertVideo','|','fullscreen','clear','undo', 'redo'],
            quickInsertButtons: ['image'],
            imageUploadURL: 'replyAskRespondController/add_replyAskRespondPhoto',
            theme: 'gray',
            imageUploadParams: {
                id: 'askRespondPhoto'
            },
            imageDefaultDisplay:"block",
            imageResize: false,
            videoMaxSize: 1024 * 1024 * 1024,
            videoInsertButtons: ['videoUpload'],
            videoUploadURL: 'replyAskRespondController/add_replyAskRespondVideo',
            videoUploadParams: {
                id: 'replyAskRespondVideo'
            },
            paragraphFormat: {
                N: '正文',
                H3: 'H1'
            },
            listAdvancedTypes: false
        }).on('froalaEditor.image.inserted', function (e, editor, $img, response) {
            var image = new Image();
            image.src= $img.attr("src");
            image.onload=function() {
                var width = image.width;
                var height = image.height;
                if (width > 700)
                {
                    width = 700;
                    var replyHeadPhoto=$("#replyHeadPhoto").val();
                    if(null==replyHeadPhoto||""==replyHeadPhoto)
                        $("#replyHeadPhoto").val($img.attr("src"));
                }
                $img.attr("width",width+"px");
                $img.attr("onclick","showImagealert(this.src)");
            }
        });
    });
</script>
<!--回复问答内容Editor结束-->
<!--我的回复问答内容Editor开始-->
<script>
    $(function(){
        $('#myreplyAskRespondEditor').on('froalaEditor.video.inserted', function (e, editor, $video){
            $video.attr("width","700px");
            $video.css("width","700px");
            $video.children("video").attr("width","700px");
            $video.children("video").css("width","700px");
        });
        $('#myreplyAskRespondEditor').froalaEditor({//,'formatOL','formatUL'
            imageDefaultWidth: 0,
            imageEditButtons: [ 'imageRemove'],
            videoEditButtons:['videoRemove'],
            language: 'zh_cn',
            toolbarButtons: ['bold','paragraphFormat','insertImage','insertVideo','|','fullscreen','clear','undo', 'redo'],
            quickInsertButtons: ['image'],
            imageUploadURL: 'replyAskRespondController/add_replyAskRespondPhoto',
            theme: 'gray',
            imageUploadParams: {
                id: 'askRespondPhoto'
            },
            videoMaxSize: 1024 * 1024 * 1024,
            videoInsertButtons: ['videoUpload'],
            videoUploadURL: 'replyAskRespondController/add_replyAskRespondVideo',
            videoUploadParams: {
                id: 'replyAskRespondVideo'
            },
            paragraphFormat: {
                N: '正文',
                H3: 'H1'
            },
            listAdvancedTypes: false
        }).on('froalaEditor.image.inserted', function (e, editor, $img, response) {
            var image = new Image();
            image.src= $img.attr("src");
            image.onload=function() {
                var width = image.width;
                var height = image.height;
                if (width > 700)
                {
                    width = 700;
                    var replyHeadPhoto=$("#replyHeadPhoto").val();
                    if(null==replyHeadPhoto||""==replyHeadPhoto)
                        $("#replyHeadPhoto").val($img.attr("src"));
                }
                $img.attr("width",width+"px");
                $img.attr("onclick","showImagealert(this.src)");
            }
        });
    });
</script>
<!--我的回复问答内容Editor结束-->
</body>
</html>
